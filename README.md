# Redux (Udemy Stephen Grider)

- **Redux** is the data contained in the application 
- **React** is the views contained in the application 

#### Difference with other libraries like Angular, Backbone and Flux: ####
- Redux: centralized data in a single object referred to as the **state** (application level state containing all the data of the application)
- Whereas other libraries has several collections. e.g. Backbone has many collections and Flux has different stores. 

_______________________________________________

### Reducers

- A **reducer** is a **function** that returns a piece of the application's state 
- Because an application can have many different pieces of state (key value pair: a key of state matching with a value of state), we can have many different reducers 
- Application State: generated by Reducers 

#### 1. Create and export a reducer (we have to export in order to use it in other parts of our application)
- reducer_books.js:

```javascript
export default function() {
	return [
		{ title: 'Javascript: The Good Parts' }, 
		{ title: "Harry Potter" }, 
		{ title: "The Dark Tower" },
		{ title: "Eloquent Ruby" }
	]
}
```

#### 2. Wire it to our Application 
- index.js: 
```javascript
import { combineReducers } from 'redux';
import BooksReducer from './reducer_books'; 

const rootReducer = combineReducers({
	books: BooksReducer
});

export default rootReducer;

```

_______________________________________________

### Containers - Connecting Redux to React 

**Redux** and **React** are separate libraries - no intrinsic connection between the two. 
Connecting these 2 libraries (react and redux) is done with another library called react-redux 
- The **react-redux** library forms the bridge between the two separate libraries (React and Redux) 

React-redux usage: 

- Define one of the components (promote it) to be a container. 
- A **container** is a React component that has a **direct connection** to the state managed by Redux. 
- A container is referred to as **smart components** (has connection to Redux) as opposed to a dumb component (no connection to Redux)

- Create a new folder in src folder called 'containers'
- Move book-list.js from components folder into containers folder 

#### Which component do we want to return into a container? 
- In general, the most parent component that cares about a particular piece of state 
- Only the parent needs to be connected (child does not need to)

_______________________________________________

### Containers - Implementation of a Container Class 

- components/app.js: (import BookList container and render it so that it appears on the App view)
```javascript
import React, { Component } from 'react';
import BookList from '../containers/book-list';

export default class App extends Component {
  render() {
    return (
      <div>
      <BookList />
      </div>
    );
  }
}
```

- containers/book-list.js: (this is the container )
```javascript
import { connect } from 'react-redux'; //import connect function from react-redux

class BookList extends Component {
	...
}

function mapStateToProps(state) {
// this function is the glue between react and redux 
// takes in the application state as an arguement 
// whatever gets returned from here will show up as props inside of BookList container above 
	return {
		books: state.books
	}; 
}

export default connect(mapStateToProps)(BookList); 
// connect(function)(component) and it produces a container, which is aware of the state contained by redux 
```
- function mapStateToProps(state)
// this function is the glue between react and redux 
// takes in the application state as an arguement 
// whatever gets returned from here will show up as props inside of BookList container above 

- export default connect(mapStateToProps)(BookList)
// connect(function)(component) and it produces a container, which is aware of the state contained by redux 


- whenever our app state changes, the container(BookList) will **automatically re-render**
- whenever the app state changes, the object in the state function **will be assigned as props** to the container component (BookList)

_______________________________________________

### Containers and Reducers Review

- Redux serves to **construct** the application state 
- whereas React serves to provide the **views** to display that state
- the two libraries are inherently disconnected and it is only throught the use of react-redux that we get a connection between the two
- Our application state is generated by reducer functions 

- in the example, we created a reducer called reducer-books.js which returns an array of books 
- the array contains a list of objects 
- we added the BooksReducer (reducer_books.js) to the reducer/index.js to our combineReducers call: 

```javascript
import { combineReducers } from 'redux';
import BooksReducer from './reducer_books'; 

const rootReducer = combineReducers({
	books: BooksReducer
});

export default rootReducer;
```

- by doing the above, it add a key-value (books: BooksReducer) to our global application state whereby the key is **books** and the value is our BooksReducer which is in this case our array of books
- book-list.js started off as a component but we decided it needs to be aware of state and hence it was promoted to a container by 
1) import { connect } from 'react-redux';
2) define function mapStateToProps(state)
3) hook our component to (mapStateToProps) function using: 

_______________________________________________

### Containers and Reducers Review






























